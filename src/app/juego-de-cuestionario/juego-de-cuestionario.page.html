<ion-header class="juegos-header">
  <ion-toolbar class="header-toolbar">
    <ion-buttons slot="start">
      <ion-back-button *ngIf="!empezado" class="menu-btn"></ion-back-button>
      <ion-button *ngIf = "empezado" style ="font-size: 17.5px;" (click)="popup()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title *ngIf = "juegoSeleccionado">{{juegoSeleccionado.NombreJuego}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf = "juegoSeleccionado && juegoSeleccionado.Tipo === 'Juego De Cuestionario' && juegoSeleccionado.JuegoActivo && alumnoJuegoDeCuestionario">

    <div *ngIf="!alumnoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Test clásico'; ">
        <ion-list *ngIf ="contar" style="text-align:right">
          <ion-label   style = "text-align: right; color: red; font-size: xx-large;">{{tiempoRestante}}</ion-label>    
        </ion-list>
        <div *ngIf = "slideActual === 0">
          <button class = "siguiente" mat-raised-button  (click)="IniciarTimer(); next()">Empezar</button>
        </div>
        <div *ngIf = "EstoyConPregunta()" >
          <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
          <button  class = "siguiente" (click) = "next()"mat-raised-button >Siguiente</button>
        </div>
        <div  *ngIf = "slideActual === PreguntasCuestionario.length + 1">
          <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
          <button (click) = "ponerNota(); next()" class = "siguiente" mat-raised-button> Finalizar</button>
        </div>
        <div *ngIf = "slideActual === PreguntasCuestionario.length + 2">
          <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
        </div>
 
      
     
      
      <ion-slides  #slides (ionSlideWillChange)="doCheck()" >
        <ion-slide>
          <ion-list   style="text-align: center;">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
    
          
            <br>
      
            <p><b>Descripción: </b>{{descripcion}}</p>
            <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
            <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
            <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
            <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
              </ion-list>

        
        </ion-slide>
        <ion-slide  *ngFor="let item of preguntasYRespuestas; let i = index">
          
          <ion-list style="text-align:center">

            <div *ngIf ="item.pregunta.Tipo === 'Verdadero o falso'">
        
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>¿Verdadero o falso?</strong></h1></label>
              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

            
                <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "MarcarVerdaderoOFalso($event, i)">
          
                  <ion-item lines = "none" style = "width: 90%; margin-left: 10%;">
                    <ion-item lines = "none">
                      <p style="font-size: 15px;">Verdadero</p> 
                      <ion-radio slot="start"  value="0" checked="{{seleccion[i][0]}}"
                        color="primary"></ion-radio>
                    </ion-item>
                    <ion-item lines = "none">
                      <p style="font-size: 15px;">Falso</p> 
                      <ion-radio slot="start" value="1" checked="{{seleccion[i][1]}}"
                        color="primary"></ion-radio>
                    </ion-item>
                  </ion-item>


            
                </ion-radio-group>
            
            </div>
            
            <div *ngIf ="item.pregunta.Tipo === 'Cuatro opciones'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Elije la opción correcta</strong></h1></label>
              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
              
              <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "radioGroupChange($event, i)">
                  <ion-item *ngFor="let respuesta of item.respuestas; let j = index"  (ionChange)="radioSelect($event, i, j)">
                    <p style="font-size: 15px;">{{respuesta}}</p> 
                    <ion-radio slot="start" value="{{j}}" checked="{{seleccion[i][j]}}"
                      color="primary"></ion-radio>
                  </ion-item>
              </ion-radio-group>
    
            </div>
             
            <div *ngIf ="item.pregunta.Tipo === 'Respuesta abierta'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Escribe tu respuesta</strong></h1></label>
              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
              <ion-input type="text" style = "color:rgb(38, 43, 105); font-size:x-large;" placeholder="Escribe tu respuesta aquí" requiered [(ngModel)]="RespuestasAlumno[i]"></ion-input>
            </div>

            <div *ngIf ="item.pregunta.Tipo === 'Emparejamiento'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Forma las parejas correctas</strong></h1></label>
              <label align = "center" style="color:rgb(109, 11, 19);"><strong>arrastrando la parte derecha <br>hasta la posición que le toca</strong></label>

              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

              <ion-item>
                <ion-list style = "width:40%">
                    <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                      <ion-item lines = "none">
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>

                <ion-list style = "width:60%">
                  <ion-reorder-group (ionItemReorder)="reorderItems($event, i)" disabled="false">
            
                    <ion-item  *ngFor="let respuesta of item.respuestas; let j=index;">
                      <ion-item *ngIf = "contestar[i]" style = "width:100%" lines = "none">
                        <ion-label style = "font-size: small;" >
                          {{respuesta}}
                        </ion-label>
                        <i class="material-icons" style = "color: gray">pan_tool</i> 
                        <ion-reorder  slot="end"> </ion-reorder>
                      </ion-item>
                    </ion-item>
                  </ion-reorder-group>
                </ion-list>
              </ion-item>

              <ion-button class="ranking-btn" *ngIf="contestar[i]" (click)="contestar[i]=false">Dejar sin contestar</ion-button>
              <ion-button class="ranking-btn" *ngIf="!contestar[i]" (click)="contestar[i]=true">Preparar para contestar</ion-button>
    

            </div>



          </ion-list>
          
        
        </ion-slide>
        <ion-slide>
         
          <ion-list style="text-align:center">

              <div style="margin-top: 235px;">
                <p>Cuestionario realizado correctamente.</p>
                <p> Haga click en "Finalizar" para guardar los cambios.</p>
              </div>
          
         
          </ion-list>
          
        </ion-slide>
        <ion-slide>
          <ion-list style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
    
          
            <p style="font-size: 25px;">NOTA: <b>{{Nota}}</b> (sobre {{puntuacionMaxima}})</p>
         
           
              <ion-item *ngFor="let item of preguntasYRespuestas, let i = index">
                <ion-list *ngIf = "item.pregunta.Tipo === 'Cuatro opciones' || item.pregunta.Tipo === 'Verdadero o falso' || item.pregunta.Tipo === 'Respuesta abierta'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{item.pregunta.RespuestaCorrecta}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>
                <ion-list *ngIf = "item.pregunta.Tipo === 'Emparejamiento'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                  <ion-item *ngIf = "contestar[i]">
                    <ion-list>
                        <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos; let j=index">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{item.respuestas[j]}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>
                  <ion-item *ngIf = "!contestar[i]">
                    En blanco 
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                  <ion-item>
                    <ion-list>
                        <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.r}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>
              </ion-item>
          
        
          
          </ion-list>
        
        </ion-slide>
      </ion-slides>
    </div>

    
    
    <div *ngIf="!alumnoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Kahoot'; ">
      <ion-list *ngIf ="contar" style="text-align:right">
        <ion-label   style = "text-align: right; color: red; font-size: xx-large;">{{tiempoRestante}}</ion-label>    
      </ion-list>
      <div *ngIf = "slideActual === 0">
        <button class = "siguiente" mat-raised-button  (click)="IniciarTimer(); next()">Empezar</button>
      </div>
      <div *ngIf = "EstoyConPregunta()" >
        <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
        <button  class = "siguiente" (click) = "next()"mat-raised-button >Siguiente</button>
      </div>
      <div  *ngIf = "slideActual === PreguntasCuestionario.length + 1">
        <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
        <button (click) = "ponerNota(); next()" class = "siguiente" mat-raised-button> Finalizar</button>
      </div>
      <div *ngIf = "slideActual === PreguntasCuestionario.length + 2">
        <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
      </div>

    
   
    
    <ion-slides  #slides (ionSlideWillChange)="doCheck()" >
      <ion-slide>
        <ion-list   style="text-align: center;">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
        
          <br>
    
          <p><b>Descripción: </b>{{descripcion}}</p>
          <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
          <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
          <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
          <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
            </ion-list>

      
      </ion-slide>
      <ion-slide  *ngFor="let item of preguntasYRespuestas; let i = index">
        
        <ion-list style="text-align:center">

          <div *ngIf ="item.pregunta.Tipo === 'Verdadero o falso'">
      
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>¿Verdadero o falso?</strong></h1></label>
            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

          
              <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "MarcarVerdaderoOFalso($event, i)">
        
                <ion-item lines = "none" style = "width: 90%; margin-left: 10%;">
                  <ion-item lines = "none">
                    <p style="font-size: 15px;">Verdadero</p> 
                    <ion-radio slot="start"  value="0" checked="{{seleccion[i][0]}}"
                      color="primary"></ion-radio>
                  </ion-item>
                  <ion-item lines = "none">
                    <p style="font-size: 15px;">Falso</p> 
                    <ion-radio slot="start" value="1" checked="{{seleccion[i][1]}}"
                      color="primary"></ion-radio>
                  </ion-item>
                </ion-item>


          
              </ion-radio-group>
          
          </div>
          
          <div *ngIf ="item.pregunta.Tipo === 'Cuatro opciones'">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Elije la opción correcta</strong></h1></label>
            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
            
            <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "radioGroupChange($event, i)">
                <ion-item *ngFor="let respuesta of item.respuestas; let j = index"  (ionChange)="radioSelect($event, i, j)">
                  <p style="font-size: 15px;">{{respuesta}}</p> 
                  <ion-radio slot="start" value="{{j}}" checked="{{seleccion[i][j]}}"
                    color="primary"></ion-radio>
                </ion-item>
            </ion-radio-group>
  
          </div>
           
          <div *ngIf ="item.pregunta.Tipo === 'Respuesta abierta'">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Escribe tu respuesta</strong></h1></label>
            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
            <ion-input type="text" style = "color:rgb(38, 43, 105); font-size:x-large;" placeholder="Escribe tu respuesta aquí" requiered [(ngModel)]="RespuestasAlumno[i]"></ion-input>
          </div>

          <div *ngIf ="item.pregunta.Tipo === 'Emparejamiento'">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Forma las parejas correctas</strong></h1></label>
            <label align = "center" style="color:rgb(109, 11, 19);"><strong>arrastrando la parte derecha <br>hasta la posición que le toca</strong></label>

            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

            <ion-item>
              <ion-list style = "width:40%">
                  <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                    <ion-item lines = "none">
                      <ion-label  style = "font-size: small;">
                        {{pareja.l}}
                      </ion-label>
                    </ion-item>
                  </ion-item>
              </ion-list>

              <ion-list style = "width:60%">
                <ion-reorder-group (ionItemReorder)="reorderItems($event, i)" disabled="false">
          
                  <ion-item  *ngFor="let respuesta of item.respuestas; let j=index;">
                    <ion-item *ngIf = "contestar[i]" style = "width:100%" lines = "none">
                      <ion-label style = "font-size: small;" >
                        {{respuesta}}
                      </ion-label>
                      <i class="material-icons" style = "color: gray">pan_tool</i> 
                      <ion-reorder  slot="end"> </ion-reorder>
                    </ion-item>
                  </ion-item>
                </ion-reorder-group>
              </ion-list>
            </ion-item>

            <ion-button class="ranking-btn" *ngIf="contestar[i]" (click)="contestar[i]=false">Dejar sin contestar</ion-button>
            <ion-button class="ranking-btn" *ngIf="!contestar[i]" (click)="contestar[i]=true">Preparar para contestar</ion-button>
  

          </div>



        </ion-list>
        
      
      </ion-slide>
      <ion-slide>
       
        <ion-list style="text-align:center">

            <div style="margin-top: 235px;">
              <p>Cuestionario realizado correctamente.</p>
              <p> Haga click en "Finalizar" para guardar los cambios.</p>
            </div>
        
       
        </ion-list>
        
      </ion-slide>
      <ion-slide>
        <ion-list style="text-align:center">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
  
        
          <p style="font-size: 25px;">NOTA: <b>{{Nota}}</b> (sobre {{puntuacionMaxima}})</p>
       
         
            <ion-item *ngFor="let item of preguntasYRespuestas, let i = index">
              <ion-list *ngIf = "item.pregunta.Tipo === 'Cuatro opciones' || item.pregunta.Tipo === 'Verdadero o falso' || item.pregunta.Tipo === 'Respuesta abierta'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{item.pregunta.RespuestaCorrecta}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>
              <ion-list *ngIf = "item.pregunta.Tipo === 'Emparejamiento'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                <ion-item *ngIf = "contestar[i]">
                  <ion-list>
                      <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos; let j=index">
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{item.respuestas[j]}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>
                <ion-item *ngIf = "!contestar[i]">
                  En blanco 
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                <ion-item>
                  <ion-list>
                      <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.r}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>
            </ion-item>
        
      
        
        </ion-list>
      
      </ion-slide>
    </ion-slides>
  </div>


    <div *ngIf="alumnoJuegoDeCuestionario.Contestado">
  
      <div *ngIf = "slideActual === 0">
        <button class = "siguiente" style = "width: 150px" mat-raised-button  (click)="next()">Ver tus respuestas</button>
      </div>
      <div *ngIf = "slideActual === 1">
        <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
        <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
      </div>
      
      <ion-slides  #slides (ionSlideWillChange)="doCheck()" >
        <ion-slide>
          <ion-list   style="text-align: center;">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
    
          
            <br>
      
            <p><b>Descripción: </b>{{descripcion}}</p>
            <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
            <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
            <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
            <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
            <br>
            <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
            <p style="font-size: 18px;">La nota obtenida es de: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
    
          </ion-list>
        </ion-slide>


        <ion-slide>
          <ion-list *ngIf = "PreguntasCuestionario && imagenesPreguntas" style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
    
          
            <p style="font-size: 25px;">NOTA: <b>{{alumnoJuegoDeCuestionario.Nota}}</b> (sobre {{puntuacionMaxima}})</p>
        
          
              <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
                <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>

                <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                  <ion-item *ngIf = "contestar[i]">
                    <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
                    <ion-list style = "width: 200%">
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{respuestasEmparejamientos[i][j]}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>
                  <ion-item *ngIf = "!contestar[i]">
                    En blanco 
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                  <ion-item>
                    <ion-list style = "width: 200%">
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                          <ion-item lines = "none" style = "width: 50%" >
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%" >
                            <ion-label  style = "font-size: small;">
                              {{pareja.r}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>



              </ion-item>
          </ion-list>
        
        </ion-slide>
      </ion-slides>
  </div>
</ion-content>
        
 
<ion-content *ngIf = "juegoSeleccionado && juegoSeleccionado.Tipo === 'Juego De Cuestionario Rápido'">

  <div>
    <ion-list *ngIf ="contar" style="text-align:right">
      <ion-label   style = "text-align: right; color: red; font-size: xx-large;">{{tiempoRestante}}</ion-label>    
    </ion-list>
    <div *ngIf = "slideActual === 0">
      <button class = "siguiente" mat-raised-button  (click)="IniciarTimer(); next()">Empezar</button>
    </div>
    <div *ngIf = "EstoyConPregunta()" >
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button  class = "siguiente" (click) = "next()"mat-raised-button >Siguiente</button>
    </div>
    <div  *ngIf = "slideActual === PreguntasCuestionario.length + 1">
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button class="siguiente"  (click) = "EnviarRespuesta(); next()">Enviar respuesta</button>
    </div>
    <div *ngIf = "slideActual === PreguntasCuestionario.length + 2">
      <button (click) = "Cerrar()" class = "siguiente">Cerrar</button>
    </div>

  
 
  
  <ion-slides  #slides (ionSlideWillChange)="doCheck()" >
    <ion-slide>
      <ion-list   style="text-align: center;">
        <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>

      
        <br>
  
        <p><b>Descripción: </b>{{descripcion}}</p>
        <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
        <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
        <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
        <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
        <!-- <button class = "ion-float-right siguiente" (click) = "IniciarTimer()" matStepperNext><i class="material-icons">arrow_forward_ios</i></button> -->
      </ion-list>

    
    </ion-slide>
    <ion-slide  *ngFor="let item of preguntasYRespuestas; let i = index">
<!--       
      <ion-list style="text-align:center">
        <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
    
        <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
  
      
        <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "radioGroupChange($event, i)">

    
          <ion-item *ngFor="let respuesta of item.respuestas; let j = index"  (ionChange)="radioSelect($event, i, j)">
            <p style="font-size: 15px;">{{respuesta}}</p> 
            <ion-radio slot="start" value="{{j}}" checked="{{seleccion[i][j]}}"
              color="primary"></ion-radio>
          </ion-item>
    
        </ion-radio-group>
      </ion-list> -->
        
      <ion-list style="text-align:center">

        <div *ngIf ="item.pregunta.Tipo === 'Verdadero o falso'">
    
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>¿Verdadero o falso?</strong></h1></label>
          <br>
          <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
          <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

        
            <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup1 (ionChange) = "MarcarVerdaderoOFalso($event, i)">
      
              <ion-item lines = "none" style = "width: 90%; margin-left: 10%;">
                <ion-item lines = "none">
                  <p style="font-size: 15px;">Verdadero</p> 
                  <ion-radio slot="start"  value="0" checked="{{seleccion[i][0]}}"
                    color="primary"></ion-radio>
                </ion-item>
                <ion-item lines = "none">
                  <p style="font-size: 15px;">Falso</p> 
                  <ion-radio slot="start"  value="1" checked="{{seleccion[i][1]}}"
                    color="primary"></ion-radio>
                </ion-item>
              </ion-item>

        
            </ion-radio-group>
        
        </div>
        
        <div *ngIf ="item.pregunta.Tipo === 'Cuatro opciones'">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Elije la opción correcta</strong></h1></label>
          <br>
          <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
          <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
          
          <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup2 (ionChange) = "radioGroupChange($event, i)">
              <ion-item *ngFor="let respuesta of item.respuestas; let j = index"  (ionChange)="radioSelect($event, i, j)">
                <p style="font-size: 15px;">{{respuesta}}</p> 
                <ion-radio slot="start" value="{{j}}" checked="{{seleccion[i][j]}}"
                  color="primary"></ion-radio>
              </ion-item>
          </ion-radio-group>

        </div>
         
        <div *ngIf ="item.pregunta.Tipo === 'Respuesta abierta'">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Escribe tu respuesta</strong></h1></label>
          <br>
          <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
          <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
          <ion-input type="text" style = "color:rgb(38, 43, 105); font-size:x-large;" placeholder="Escribe tu respuesta aquí" requiered [(ngModel)]="RespuestasAlumno[i]"></ion-input>
        </div>

        <div *ngIf ="item.pregunta.Tipo === 'Emparejamiento'">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Forma las parejas correctas</strong></h1></label>
          <label align = "center" style="color:rgb(109, 11, 19);"><strong>arrastrando la parte derecha <br>hasta la posición que le toca</strong></label>

          <br>
          <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
          <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

          <ion-item>
            <ion-list style = "width:40%">
                <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                  <ion-item lines = "none">
                    <ion-label  style = "font-size: small;">
                      {{pareja.l}}
                    </ion-label>
                  </ion-item>
                </ion-item>
            </ion-list>

            <ion-list style = "width:60%">
              <ion-reorder-group (ionItemReorder)="reorderItems($event, i)" disabled="false">
        
                <ion-item  *ngFor="let respuesta of item.respuestas; let j=index;">
                  <ion-item *ngIf = "contestar[i]" style = "width:100%" lines = "none">
                    <ion-label style = "font-size: small;" >
                      {{respuesta}}
                    </ion-label>
                    <i class="material-icons" style = "color: gray">pan_tool</i> 
                    <ion-reorder  slot="end"> </ion-reorder>
                  </ion-item>
                </ion-item>
              </ion-reorder-group>
            </ion-list>
          </ion-item>

          <ion-button class="ranking-btn" *ngIf="contestar[i]" (click)="contestar[i]=false">Dejar sin contestar</ion-button>
          <ion-button class="ranking-btn" *ngIf="!contestar[i]" (click)="contestar[i]=true">Preparar para contestar</ion-button>


        </div>



      </ion-list>
      
    
    
    </ion-slide>
    <ion-slide>
     
      <ion-list style="text-align:center">

          <div style="margin-top: 235px;">
            <p>Cuestionario realizado correctamente.</p>
            <p> Ya puedes enviar tus respuestas</p>
          </div>
      
     
      </ion-list>
      
    </ion-slide>
    <ion-slide>
      <ion-list style="text-align:center">
        <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>

      
        <p style="font-size: 25px;">NOTA: <b>{{Nota}}</b> (sobre {{puntuacionMaxima}})</p>
     
       
          <ion-item *ngFor="let item of preguntasYRespuestas, let i = index">
            <ion-list *ngIf = "item.pregunta.Tipo === 'Cuatro opciones' || item.pregunta.Tipo === 'Verdadero o falso' || item.pregunta.Tipo === 'Respuesta abierta'">
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{item.pregunta.RespuestaCorrecta}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
            </ion-list>
            <ion-list *ngIf = "item.pregunta.Tipo === 'Emparejamiento'">
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
              <ion-item *ngIf = "contestar[i]">
                <ion-list>
                    <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos; let j=index">
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{item.respuestas[j]}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>
              </ion-item>
              <ion-item *ngIf = "!contestar[i]">
                En blanco 
              </ion-item>

              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
              <ion-item>
                <ion-list>
                    <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{pareja.r}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>
              </ion-item>

              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
            </ion-list>
          </ion-item>
      
    
      
      </ion-list>

<!--       
      <ion-list style="text-align:center">
        <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>

      
        <p style="font-size: 25px;">NOTA: <b>{{Nota}}</b> (sobre {{puntuacionMaxima}})</p>
     
       
          <ion-item *ngFor="let item of preguntasYRespuestas, let i = index">
            <ion-list>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{item.pregunta.RespuestaCorrecta}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
            </ion-list>
          </ion-item>
      
    
      
      </ion-list> -->
    
    </ion-slide>
  </ion-slides>
</div>

</ion-content>


<ion-content *ngIf = "juegoSeleccionado && juegoSeleccionado.Tipo === 'Juego De Cuestionario' && juegoSeleccionado.JuegoTerminado && alumnoJuegoDeCuestionario">
    <div *ngIf = "slideActual === 0">
      <button  class = "siguiente" style = "width: 180px" mat-raised-button  (click)="next()">Ver clasificación final</button>
    </div>
    <div *ngIf = "slideActual === 1">
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button (click) = "next()" class = "siguiente" style = "width: 150px">Ver tus respuestas</button>
    </div>
    <div *ngIf = "slideActual === 2">
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button (click) = "Volver()" class = "siguiente">Cerrar</button>
    </div>
    
    <ion-slides  #slides (ionSlideWillChange)="doCheck()" >
      <ion-slide>
        <ion-list   style="text-align: center;">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
        
          <br>
    
          <p><b>Descripción: </b>{{descripcion}}</p>
          <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
          <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
          <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
          <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
          <br>
          <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
          <p style="font-size: 18px;">La nota obtenida es de: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
  
        </ion-list>
      </ion-slide>
      <ion-slide>
        <ion-list style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Clasificación final</strong></h1></label>
            <br>
            
            <ion-list>
              <ion-item  lines = "none"*ngFor="let alum of rankingAlumnosPorNota">
                <ion-item lines = "none" style = "width: 20%">
                  <img  *ngIf = "alum.imagenPerfil" style = "width:40px; height: 40px;" [src]="alum.imagenPerfil"> 
                </ion-item>
                <ion-item lines = "none" style = "width: 60%">
                  <ion-label > {{alum.nombre}} {{alum.primerApellido}} </ion-label>
                </ion-item>
                <ion-item lines = "none" style = "text-align:rigth">
                  <ion-label style= " color: green"> {{alum.nota}}</ion-label>
                  <!-- <img  *ngIf = "alum.ImagenPerfil" style = "width:40px; height: 40px;" [src]="alum.ImagenPerfil"> -->
                </ion-item>
              </ion-item>
            </ion-list>


        </ion-list>
      </ion-slide>

      <ion-slide>
        <ion-list *ngIf = "PreguntasCuestionario && imagenesPreguntas" style="text-align:center">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Tus respuestas</strong></h1></label>
  
        
          <p style="font-size: 25px;">NOTA: <b>{{alumnoJuegoDeCuestionario.Nota}}</b> (sobre {{puntuacionMaxima}})</p>




          
          <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
            <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
              <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
            </ion-list>

            <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
              <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
              <ion-item *ngIf = "contestar[i]">
                <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
                <ion-list style = "width: 200%">
                    <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{respuestasEmparejamientos[i][j]}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>
              </ion-item>
              <ion-item *ngIf = "!contestar[i]">
                En blanco 
              </ion-item>

              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
              <ion-item>
                <ion-list style = "width: 200%">
                    <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                      <ion-item lines = "none" style = "width: 50%" >
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                      <ion-item lines = "none" style = "width: 50%" >
                        <ion-label  style = "font-size: small;">
                          {{pareja.r}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>
              </ion-item>

              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
            </ion-list>



          </ion-item>
      
        </ion-list>
      
      </ion-slide>
    </ion-slides>
</ion-content>
